
<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>disco_1</title>
  <style>
    html, body {
      margin: 0;
      padding: 0;
      background-color: black;
      color: white;
      font-family: sans-serif;
      height: 100%;
    }
    header {
      background: url('../banner_difuminado_suave.jpg') center/cover no-repeat;
      height: 150px;
      width: 100%;
    }
    .contenido {
      display: flex;
      height: calc(100% - 150px);
      align-items: stretch;
    }
    nav {
      width: 200px;
      padding: 1rem;
      box-sizing: border-box;
    }
    .boton {
      display: block;
      width: 100%;
      margin-bottom: 1.4rem;
      padding: 1rem;
      text-align: center;
      color: white;
      font-weight: bold;
      border: 2px solid white;
      text-decoration: none;
      font-size: 0.82rem;
      word-wrap: break-word;
      box-sizing: border-box;
    }
    .rojo { background-color: red; }
    .verde { background-color: limegreen; }
    main {
      flex: 1;
      padding: 0.5rem 2rem;
      display: flex;
      flex-direction: column;
    }
    .cuadro-central {
      border: 1px solid white;
      padding: 1rem;
      margin-top: 2.5rem;
      display: flex;
      flex-direction: column;
      justify-content: space-between;
      height: 410px;
      position: relative;
      overflow-y: auto;
    }
    td:nth-child(2) { padding-right: 5rem; }
    td:nth-child(3) { padding-right: 6rem; }

    #spotify-player {
      position: absolute;
      top: 19px;
      left: 129px;
      right: 8.5rem;
      height: 24px;
      z-index: 10;
    }
    #linea-tiempo {
      display: block;
      position: absolute;
      top: 109px;
      left: 220px;
      right: 21rem;
      height: 8px;
      background: transparent;
      z-index: 5;
    }
    .marca-punto {
      position: absolute;
      top: 0;
      width: 10px;
      height: 10px;
      background-color: white;
      border-radius: 50%;
      transform: translateX(-50%);
      cursor: pointer;
    }
    .marca-punto.activa {
      background-color: limegreen;
    }
    tr[data-inicio] {
      cursor: pointer;
      transition: background-color 0.3s;
    }
    tr[data-inicio]:hover {
      background-color: #222;
    }
    tr[data-inicio].seleccionada {
      background-color: #333;
    }
  </style>
</head>
<body>
<!-- Resto sin cambios, solo aplicamos nuevas funciones abajo -->
<script>
const marcasPorTrack = {
  "2tNc8CbX63N3TaV0rZasrL": {
    duracion: 148,
    marcas: [
      { segundos: 0, nombre: "OLUMBANSHÉ" },
      { segundos: 105, nombre: "CHACHÁLOKPAFÚÑ" }
    ]
  }
};

function cargarMilimetrada(trackID) {
  const linea = document.getElementById("linea-tiempo");
  linea.innerHTML = "";
  const track = marcasPorTrack[trackID];
  if (!track) return;

  track.marcas.forEach((m, i) => {
    const punto = document.createElement("div");
    punto.className = "marca-punto";
    punto.style.left = `${(m.segundos / track.duracion) * 100}%`;
    punto.title = m.nombre;
    punto.dataset.index = i;
    linea.appendChild(punto);
  });
}

function activarMarca(index) {
  document.querySelectorAll(".marca-punto").forEach(p => p.classList.remove("activa"));
  const punto = document.querySelector(`.marca-punto[data-index='${index}']`);
  if (punto) punto.classList.add("activa");
}

function reproducirTema(trackID) {
  document.getElementById("spotify-container").innerHTML = "";
  document.getElementById("spotify-player").innerHTML = "";
  document.getElementById("linea-tiempo").style.display = "block";
  cargarMilimetrada(trackID);
  setTimeout(() => {
    document.getElementById("spotify-player").innerHTML = `
      <iframe style="border-radius:12px"
              src="https://open.spotify.com/embed/track/${trackID}?autoplay=1"
              width="100%" height="80" frameBorder="0"
              allow="autoplay; clipboard-write; encrypted-media; fullscreen; picture-in-picture"
              loading="lazy">
      </iframe>
    `;
  }, 200);
}

document.addEventListener("DOMContentLoaded", () => {
  document.querySelectorAll("tr[data-inicio]").forEach((tr, index) => {
    tr.addEventListener("click", () => {
      document.querySelectorAll("tr[data-inicio]").forEach(row => row.classList.remove("seleccionada"));
      tr.classList.add("seleccionada");
      activarMarca(index);
    });
  });
});
</script>
</body>
</html>
